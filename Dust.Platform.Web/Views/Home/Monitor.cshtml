@using Dust.Platform.Web.Models.Home
@using Newtonsoft.Json
@using ViewType = Dust.Platform.Web.Models.Home.ViewType
@model MonitorViewModel
@{
    ViewBag.Title = "首页";
}
@section styles{
    <link href="/Content/zTreeStyle.css" rel="stylesheet">
    <script type="text/javascript" src="http://webapi.amap.com/maps?v=1.3&key=bd6b099fe5ff4f6975776ea630775a02"></script>
}
<div style="position: relative; height: 100%;">
    <div class="col-lg-2" style="height: 100%;">
        <div class="panel panel-info" style="min-height: 100%; margin-bottom: 3px; position: relative; display: flex; flex-direction: column;">
            <div class="panel-heading">实时监测</div>
            <div class="panel-body" style="bottom: 0; overflow-y: auto;">
                <ul id="treeNodes" class="ztree"></ul>
            </div>
        </div>
    </div>
    <div class="col-lg-10" style="height: 100%; overflow-y: hidden;">
        <div class="tabBar">
            <ul class="nav nav-tabs" role="tablist">
                <li role="presentation" class="active"><a href="#">所有数据</a></li>
            </ul>
        </div>
        <div style="height: 100%; padding: 5px; border: 1px solid #bce8f1;">
            @{
                Html.RenderAction("MonitorContent", new MonitorContentPost
                {
                    MapContainer = "mapContainer",
                    ViewType = ViewType.City
                });
            }
        </div>
    </div>

</div>
@section scripts{
    <script src="~/Scripts/Utility/jquery.ztree.all.min.js"></script>
    <script src="~/Scripts/Page/monitor.js"></script>
    <script type="text/javascript">
        var treeNodes = JSON.parse('@Html.Raw(JsonConvert.SerializeObject(Model.TreeNodes))');
        var setting = {
            view: {
                selectedMulti: false
            }
        }

        zTreeObj = $.fn.zTree.init($('#treeNodes'), setting, treeNodes);
    </script>
}

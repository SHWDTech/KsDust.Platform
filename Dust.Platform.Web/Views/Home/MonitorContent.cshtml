@using Dust.Platform.Storage.Model
@using Dust.Platform.Web.Models.Home
@model MonitorContentPost
@{
    Layout = null;
}

<div class="col-lg-6" style="height: 100%; padding: 2px;">
    <div class="map panel panel-info" id="@Model.MapContainer"></div>
    <div class="targetInfo">
        <div class="panel panel-info" style="max-height: 100%;position: relative; display: flex; flex-direction: column;">
            <div class="panel-heading">
                <span>@Model.Title 统计信息</span>
            </div>
            <div class="panel-body" style="bottom: 0; overflow-y: auto;">

                @switch (Model.ViewType)
                {
                    case AverageCategory.WholeCity:
                        <table class="table table-bordered table-striped table-hover">
                            <thead>
                                <tr>
                                    <td>区县</td>
                                    <td>工程总数</td>
                                    <td>已安装数</td>
                                    <td>安装率</td>
                                </tr>
                            </thead>
                            <tbody>

                                @foreach (var info in Model.DistrictInfos)
                    {
                                    <tr>
                                        <td>@info.DistrictName</td>
                                        <td>@info.ProjectsCount</td>
                                        <td>@info.ProjectsInstalled</td>
                                        <td>@info.InstallPercentage</td>
                                    </tr>
                                }

                            </tbody>
                        </table>
                        break;
                    case AverageCategory.District:
                        <table class="table table-bordered table-striped table-hover">
                            <thead>
                                <tr>
                                    <td>工程</td>
                                    <td>监控点数</td>
                                    <td>占地面积(㎡)</td>
                                    <td>建筑面积(㎡)</td>
                                </tr>
                            </thead>
                            <tbody>

                                @foreach (var info in Model.DistrictStatuses)
                    {
                                    <tr>
                                        <td>@info.ProjectName</td>
                                        <td>@info.DevicesCount</td>
                                        <td>@info.TotalOccupiedArea</td>
                                        <td>@info.TotalFloorage</td>
                                    </tr>
                                }

                            </tbody>
                        </table>
                        break;
                    case AverageCategory.Enterprise:
                        <table class="table table-bordered table-striped table-hover">
                            <thead>
                                <tr>
                                    <td>工程</td>
                                    <td>监控点数</td>
                                    <td>占地面积(㎡)</td>
                                    <td>建筑面积(㎡)</td>
                                </tr>
                            </thead>
                            <tbody>

                                @foreach (var info in Model.DistrictStatuses)
                    {
                                    <tr>
                                        <td>@info.ProjectName</td>
                                        <td>@info.DevicesCount</td>
                                        <td>@info.TotalOccupiedArea</td>
                                        <td>@info.TotalFloorage</td>
                                    </tr>
                                }

                            </tbody>
                        </table>
                        break;
                    case AverageCategory.Project:
                        <table class="table table-bordered table-striped table-hover">
                            <thead></thead>
                            <tbody>
                                <tr>
                                    <td>合同备案号：</td>
                                    <td>@Model.Project.ContractRecord</td>
                                    <td>设备厂商：</td>
                                    <td>@Model.Project.Vendor.Name</td>
                                </tr>
                                <tr>
                                    <td>工程名称：</td>
                                    <td>@Model.Project.Name</td>
                                    <td>所属区县：</td>
                                    <td>@Model.Project.District.Name</td>
                                </tr>
                                <tr>
                                    <td>建设单位：</td>
                                    <td>@Model.Project.ConstructionUnit</td>
                                    <td>施工单位：</td>
                                    <td>@Model.Project.Enterprise.Name</td>
                                </tr>
                                <tr>
                                    <td>工程地址：</td>
                                    <td>@Model.Project.Address</td>
                                    <td>负责人：</td>
                                    <td>@Model.Project.SuperIntend</td>
                                </tr>
                                <tr>
                                    <td>联系电话：</td>
                                    <td>@Model.Project.Mobile</td>
                                    <td>工程状态：</td>
                                    @{ var prjStatus = Model.Project.Stopped ? "停工" : "在建";}
                                    <td>@prjStatus</td>
                                </tr>
                            </tbody>
                        </table>
                                            break;
                                        case AverageCategory.Device:
                                            <table class="table table-bordered table-striped table-hover">
                                                <thead></thead>
                                                <tbody>
                                                    <tr>
                                                        <td>设备名称：</td>
                                                        <td>@Model.Device.Name</td>
                                                        <td>设备厂商：</td>
                                                        <td>@Model.Device.Vendor.Name</td>
                                                    </tr>
                                                    <tr>
                                                        <td>所属区县：</td>
                                                        <td>@Model.Device.Project.District.Name</td>
                                                        <td>工程地址：</td>
                                                        <td>@Model.Device.Project.Address</td>
                                                    </tr>
                                                    <tr>
                                                        <td>建设单位：</td>
                                                        <td>@Model.Device.Project.ConstructionUnit</td>
                                                        <td>施工单位：</td>
                                                        <td>@Model.Device.Project.Enterprise.Name</td>
                                                    </tr>
                                                    <tr>
                                                        <td>负责人：</td>
                                                        <td>@Model.Device.Project.SuperIntend</td>
                                                        <td>联系电话：</td>
                                                        <td>@Model.Device.Project.Mobile</td>
                                                    </tr>
                                                    <tr>
                                                        <td>安装时间：</td>
                                                        <td>@Model.Device.InstallDateTime</td>
                                                        <td>在线状态：</td>
                                                        @{ var devStatus = Model.Device.IsOnline ? "在线" : "离线";}
                                                        <td>@devStatus</td>
                                                    </tr>
                                                </tbody>
                                            </table>
                                                                break;
                                                            }

            </div>
        </div>
    </div>
</div>
<div class="col-lg-6" style="height: 100%; padding: 2px;">
    <div class="panel panel-info" style="height: 48%; margin-bottom: 1%;">
        <div class="panel panel-info">
            <div class="panel-heading">
                <span>@Model.Title 最近24小时变化趋势</span>
                <select id="@Model.Selecter" class="form-control" style="float: right; padding: 0;height: 20px;width: 160px;">
                    <option value="0">粉尘(mg/m³)</option>
                    <option value="3">噪音(mg/m³)</option>
                    <option value="4">温度(℃)</option>
                    <option value="5">湿度(%)</option>
                    <option value="6">风速(m/s)</option>
                </select>
            </div>
            <div class="panel-body">
                <div id="@Model.Chart"></div>
            </div>
        </div>
    </div>
    <div class="panel panel-info" style="height: 48%;">
        <div class="panel panel-info" style="max-height: 100%;position: relative; display: flex; flex-direction: column;">
            <div class="panel-heading">
                <span>@Model.Title 最近24小时监测数据</span>
            </div>
            <div class="panel-body" style="bottom: 0; overflow-y: auto;">
                <table class="table table-bordered table-striped table-hover">
                    <thead>
                        <tr>
                            <td>粉尘(mg/m³)</td>
                            <td>PM2.5(mg/m³)</td>
                            <td>PM10(mg/m³)</td>
                            <td>噪音(dB)</td>
                            <td>温度(℃)</td>
                            <td>湿度(%)</td>
                            <td>风速(m/s)</td>
                            <td>监测时间</td>
                        </tr>
                    </thead>
                    <tbody>
                        @{
                            foreach (var monitorData in Model.MonitorDatas)
                            {
                                <tr>
                                    <td>@monitorData.ParticulateMatter</td>
                                    <td>@monitorData.Pm25</td>
                                    <td>@monitorData.Pm100</td>
                                    <td>@monitorData.Noise</td>
                                    <td>@monitorData.Temperature</td>
                                    <td>@monitorData.Humidity</td>
                                    <td>@monitorData.WindSpeed</td>
                                    <td>@monitorData.AverageDateTime.ToString("yyyy-MM-dd HH:mm")</td>
                                </tr>
                            }
                        }
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</div>